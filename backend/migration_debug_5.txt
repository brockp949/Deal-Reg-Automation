
> dealreg-backend@1.0.0 db:migrate
> node -r tsx/cjs src/db/migrate.ts

Running database migrations...
Running base schema...
2025-12-02 15:08:05 [[32minfo[39m]: Database connection established
Î“Â£Ã´ Base schema applied
Running migration: 002_enhance_deal_schema.sql...
Î“Â£Ã´ 002_enhance_deal_schema.sql completed
Running migration: 003_add_transcript_fields.sql...
Î“Â£Ã´ 003_add_transcript_fields.sql completed
Running migration: 004_multiple_vendors_per_deal.sql...
Î“Â£Ã´ 004_multiple_vendors_per_deal.sql completed
Running migration: 005_vendor_approval_workflow.sql...
Î“Â£Ã´ 005_vendor_approval_workflow.sql completed
Running migration: 006_field_provenance.sql...
Î“Â£Ã´ 006_field_provenance.sql completed
Running migration: 007_file_security_audit.sql...
Î“Â£Ã´ 007_file_security_audit.sql completed
Running migration: 008_file_dedupe.sql...
Î“Â£Ã´ 008_file_dedupe.sql completed
Running migration: 009_config_snapshots.sql...
Î“Â£Ã´ 009_config_snapshots.sql completed
Running migration: 010_config_apply_tracking.sql...
Î“Â£Ã´ 010_config_apply_tracking.sql completed
Running migration: 011_ai_extraction.sql...
Î“Â£Ã´ 011_ai_extraction.sql completed
Running migration: 011_error_tracking.sql...
Î“Â£Ã´ 011_error_tracking.sql completed
Running migration: 012_validation_tracking.sql...
Î“Â£Ã´ 012_validation_tracking.sql completed
Running migration: 013_vendor_aliases.sql...
Î“Â£Ã´ 013_vendor_aliases.sql completed
Running migration: 014_duplicate_detection.sql...
Î“Â£Ã´ 014_duplicate_detection.sql completed
Running migration: 015_add_performance_indexes.sql...
Î“Â£Ã¹ Migration failed: error: operator class "gin_trgm_ops" does not exist for access method "gin"
    at C:\Users\brock\Documents\Deal Reg Automation\Deal-Reg-Automation\backend\node_modules\pg-pool\index.js:45:11
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async runMigrations (C:\Users\brock\Documents\Deal Reg Automation\Deal-Reg-Automation\backend\src\db\migrate.ts:24:7) {
  length: 131,
  severity: 'ERROR',
  code: '42704',
  detail: undefined,
  hint: undefined,
  position: undefined,
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'indexcmds.c',
  line: '2180',
  routine: 'ResolveOpClass'
}
